<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Infinitely Repeating Minecraft Seeds</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: #f0f0f0;
      color: #222;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      max-width: 600px;
      margin: auto;
    }

    label, select, input, button {
      display: block;
      margin-top: 1rem;
    }

    textarea {
      margin-top: 1rem;
    }

    .dark-mode {
      background-color: #121212;
      color: #e0e0e0;
    }

    .dark-mode input,
    .dark-mode select,
    .dark-mode textarea {
      background-color: #2c2c2c;
      color: #ffffff;
      border: 1px solid #555;
    }

    .dark-toggle {
      margin-top: 1.5rem;
      cursor: pointer;
    }

    #error-message {
      color: red;
      font-weight: bold;
    }

    .button-row {
      display: flex;
      gap: 10px;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Infinitely Repeating Minecraft Seeds for 1.18+</h1>

    <label for="edition">Minecraft Edition:</label>
    <select id="edition" onchange="updatePatternOptions()">
      <option value="bedrock">Bedrock</option>
      <option value="java">Java</option>
    </select>

    <label for="pattern">Repeating Pattern:</label>
    <select id="pattern"></select>

    <label for="amount">Number of seeds (1–10000):</label>
    <input type="number" id="amount" min="1" max="10000" value="10" />

    <p id="error-message"></p>

    <div class="button-row">
      <button onclick="generateSeeds()">Generate Seeds</button>
      <button onclick="copySeeds()">Copy Seeds</button>
      <button onclick="downloadSeeds()">Download Seeds</button>
    </div>

    <label class="dark-toggle">
      <input type="checkbox" onchange="toggleDarkMode()" />
      Enable Dark Mode
    </label>

    <div id="results"></div>
  </div>

  <script>
    function updatePatternOptions() {
      const edition = document.getElementById("edition").value;
      const pattern = document.getElementById("pattern");

      pattern.innerHTML = "";

      if (edition === "bedrock") {
        pattern.innerHTML += '<option value="diagonal">Diagonally Repeating (Decorations)</option>';
        pattern.innerHTML += '<option value="vertical">Vertically Repeating (Mineshafts)</option>';
      } else if (edition === "java") {
        pattern.innerHTML += '<option value="vertical">Vertically Repeating (Mineshafts)</option>';
        pattern.innerHTML += '<option value="horizontal">Horizontally Repeating (Mineshafts)</option>';
      }
    }

    function generateSeeds() {
      const edition = document.getElementById("edition").value;
      const pattern = document.getElementById("pattern").value;
      const amount = parseInt(document.getElementById("amount").value);
      const errorMessage = document.getElementById("error-message");
      const resultsDiv = document.getElementById("results");

      errorMessage.textContent = "";
      resultsDiv.innerHTML = "";

      if (isNaN(amount) || amount < 1 || amount > 10000) {
        errorMessage.textContent = "Error: the number of seeds exceeds the limit (1–10000).";
        return;
      }

      let baseSeed, shift, nMin, nMax;

      if (edition === "bedrock") {
        shift = 32;
        nMin = -2147483647;
        nMax = 2147483647;

        if (pattern === "diagonal") {
          baseSeed = 1669320484;
        } else if (pattern === "vertical") {
          baseSeed = 1000686894;
        }
      } else if (edition === "java") {
        shift = 48;
        nMin = -32768;
        nMax = 32768;

        if (pattern === "vertical") {
          baseSeed = 164311266871034;
        } else if (pattern === "horizontal") {
          baseSeed = 107038380838084;
        }
      }

      const seeds = [];

      for (let i = 0; i < amount; i++) {
        const n = Math.floor(Math.random() * (nMax - nMin + 1)) + nMin;
        const seed = BigInt(baseSeed) + (BigInt(1) << BigInt(shift)) * BigInt(n);
        seeds.push(seed.toString());
      }

      resultsDiv.innerHTML = `
        <h3>Generated Seeds:</h3>
        <textarea id="seedOutput" rows="10" style="width:100%">${seeds.join("\n")}</textarea>
      `;
    }

    function copySeeds() {
      const seedOutput = document.getElementById("seedOutput");
      if (!seedOutput) return;
      seedOutput.select();
      document.execCommand("copy");
      alert("Successfully copied to clipboard!");
    }

    function downloadSeeds() {
      const seedOutput = document.getElementById("seedOutput");
      if (!seedOutput) return;
      const blob = new Blob([seedOutput.value], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "infinitely_repeating_seeds.txt";
      link.click();
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
    }

    // Initialize pattern dropdown on load
    updatePatternOptions();
  </script>
</body>
</html>
